## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

1.  –¶–µ–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Targets): –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–µ—Ä–≤–µ—Ä–∞, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ HTTP –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ /metrics. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Node Exporter –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —Å —Ö–æ—Å—Ç–∞.
2.  Prometheus: –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã.
    *   –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ "–≤—ã—Ç—è–≥–∏–≤–∞–µ—Ç" (pull-–º–æ–¥–µ–ª—å) –º–µ—Ç—Ä–∏–∫–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π.
    *   –•—Ä–∞–Ω–µ–Ω–∏–µ: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –¥–∏—Å–∫–µ.
    *   –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: –í—ã–ø–æ–ª–Ω—è–µ—Ç –º–æ—â–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (PromQL) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö.
3.  Grafana: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.
    *   –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Prometheus –∫–∞–∫ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö (DataSource).
    *   –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ PromQL.
    *   –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤.

---

## üìà –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–µ

–í —Ç–∞–±–ª–∏—Ü–µ –Ω–∏–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ã—á–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ.

| –ú–µ—Ç—Ä–∏–∫–∞ (PromQL –ø—Ä–∏–º–µ—Ä) | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ –∏ –¥–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| :--- | :--- | :--- |
| up | Gauge | –°—Ç–∞—Ç—É—Å —Ü–µ–ª–∏. –ó–Ω–∞—á–µ–Ω–∏–µ 1 = —Ü–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞, 0 = –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –û—Å–Ω–æ–≤–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏. |
| node_memory_MemTotal_bytes | Gauge | –û–±—â–∏–π –æ–±—ä–µ–º –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. |
| node_memory_MemAvailable_bytes | Gauge | –î–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: (1 - (MemAvailable / MemTotal)) * 100 |
| rate(node_cpu_seconds_total{mode="idle"}[1m]) | Counter (–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è) | –ó–∞–≥—Ä—É–∑–∫–∞ CPU. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç % –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU –∑–∞ 1 –º–∏–Ω—É—Ç—É. (1 - avg(rate(...))) * 100 |
| node_filesystem_avail_bytes | Gauge | –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ. –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –º–µ—Å—Ç–∞. |
| rate(node_network_receive_bytes_total[1m]) | Counter (–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è) | –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–µ—Ç–∏ (–±–∞–π—Ç/—Å–µ–∫). –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. |
| rate(node_network_transmit_bytes_total[1m]) | Counter (–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è) | –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–µ—Ç–∏ (–±–∞–π—Ç/—Å–µ–∫). |
| process_resident_memory_bytes | Gauge | –ü–∞–º—è—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–º–∏–º Prometheus). –ü–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏. |
| http_requests_total | Counter | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å rate() –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ RPS (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É). |

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ú–µ—Ç—Ä–∏–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º node_ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è Node Exporter.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ Prometheus (`prometheus.yml`).



global:
  scrape_interval: 15s # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Å–æ–±–∏—Ä–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
  evaluation_interval: 15s # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ—Ü–µ–Ω–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞ –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π (Alertmanager)
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          # - alertmanager:9093

# –§–∞–π–ª—ã —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤
rule_files:
  # - "first_rules.yml"
  # - "second_rules.yml"

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ (–∑–∞–¥–∞—á–∏)
scrape_configs:
  # –ó–∞–¥–∞—á–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∞–º–æ–≥–æ Prometheus
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # –ó–∞–¥–∞—á–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ Node Exporter
  - job_name: "node"
    static_configs:
      - targets: ["node-exporter:9100"]
    # –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É 'environment' –∫–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º –∏–∑ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏
    labels:
      environment: "production"

### üöÄ –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ó–∞–ø—É—Å–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Grafana

## 1. –ó–∞–ø—É—Å–∫ Grafana

```bash
# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
docker run -d -p 3000:3000 --name grafana grafana/grafana:latest

# –ò–ª–∏ —Å Docker Compose
docker-compose up -d
